---
title: "The Tree Detective"
output:
  html_document:
    toc: yes
    toc_depth: 3
---

```{r include=FALSE}
knitr::opts_chunk$set(tidy=FALSE,fig.width=5.5,fig.height=3.5, cache = TRUE)
library(tigerstats)
library(tigerTree)
```

`treeDetective()` is a simple app that you can show to a fellow students to help him or her understand how a tree works.

## Setup

Consider the `m111survey` data frame from the `tigerstats` package, and say that we constuct a tree to predict the sex of a perosn from the other variables in this data frame:

```{r}
str(m111survey)
s2 <- subset(m111survey, complete.cases(m111survey) == TRUE)
trMod <- tree(sex ~ ., data = s2)
plot(trMod); text(trMod)
```

## Calling the Detective

Now we simply call `treeDetective()`:

```{r eval = FALSE}
treeDetective(trMod, data = s2)
```

The first argument is the model we made; the `data` argument should be set to the data frame we used to make this model.

Now suppose we want to learn what the mode predicts for a person a person whose ideal height is 69 inches and whose GPA is 3.1.  As you can see from the plto above, since the ideal height is less than 71 inches we move from the root node to the left.  We then come to a node where GPA is the deciding variable.  Since the GPA is less than 2.785 we move to the left again, arriving at temrinal node where the majority of observations are females.

The tree-detective takes the same trip through tree, interactively:

```
> treeDetective(trMod, data = s2)
Is ideal_ht < 71 (y/n)? y
Is GPA < 2.785 (y/n)? y
I have reached a leaf with 6 items.
I predict the value is female.
The estimated probabilities for each class are:
   female      male 
0.6666667 0.3333333 
     1      0 
```

Apparently four of the six individuals at the temrinal node are female and two are male, hence the prediction that this person is female.

## Regression-Tree Detective

You can use the app with regression trees, too:

```{r}
trFast <- tree(fastest ~ ., data = s2)
plot(trFast); text(trFast)
```

Now imagine a person whose ideal height is 73 inches and who prefers to sit in the back.  The interaction for this person is as follows:

```
```





